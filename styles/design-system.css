/**
 * PathFinder Pro Design System - Consolidated
 * Complete Component Library with Instant Feedback
 *
 * Core Principles:
 * - Zero-duration animations (instant feedback only)
 * - Light mode optimized with professional accents
 * - Inter + JetBrains Mono typography
 * - Precise 8px spacing system
 * - Mobile-first responsive design
 */

/* === CORE DESIGN TOKENS === */
:root {
  /* ========================================
     AREUM DESIGN TOKENS (Notion-inspired)
     ======================================== */

  /* Areum Surface Colors */
  --areum-canvas: #F7F7F5;        /* Warm canvas background */
  --areum-surface: #FFFFFF;       /* Cards, sections */
  --areum-border: #E3E3E0;        /* Warm neutral border */

  /* Areum Text Colors */
  --areum-text-primary: #37352F;    /* Warm near-black */
  --areum-text-secondary: #787774;  /* Warm gray */
  --areum-text-tertiary: #9B9A97;   /* Light warm gray */

  /* Areum Interactive */
  --areum-accent: #2383E2;          /* Blue accent */
  --areum-accent-hover: #1a6bb8;    /* Darker blue */
  --areum-accent-bg: #EEF2FF;       /* Light blue bg */
  --areum-accent-border: #C7D2FE;   /* Blue border */
  --areum-accent-text: #1E40AF;     /* Dark blue text */

  /* Areum Semantic - Success */
  --areum-success: #0F7B6C;         /* Teal green */
  --areum-success-bg: #F0FDF4;      /* Light green bg */
  --areum-success-border: #BBF7D0;  /* Green border */
  --areum-success-text: #166534;    /* Dark green text */

  /* Areum Semantic - Warning */
  --areum-warning: #D9730D;         /* Warm amber */
  --areum-warning-bg: #FFFBEB;      /* Light amber bg */
  --areum-warning-border: #FDE68A;  /* Amber border */
  --areum-warning-text: #92400E;    /* Dark amber text */

  /* Areum Semantic - Danger */
  --areum-danger: #E03E3E;          /* Warm red */
  --areum-danger-bg: #FEF2F2;       /* Light red bg */
  --areum-danger-border: #FECACA;   /* Red border */
  --areum-danger-text: #991B1B;     /* Dark red text */

  /* ========================================
     LEGACY TOKENS (compatibility)
     Map to areum values where appropriate
     ======================================== */

  /* Color Palette - Light Mode Optimized */
  --color-bg-primary: var(--areum-canvas);      /* Use areum canvas */
  --color-bg-secondary: var(--areum-surface);   /* Use areum surface */
  --color-bg-surface: var(--areum-surface);
  --color-bg-elevated: #f8fafc;
  --color-bg-overlay: rgba(0, 0, 0, 0.5);

  --color-text-primary: var(--areum-text-primary);      /* Use areum text */
  --color-text-secondary: var(--areum-text-secondary);
  --color-text-tertiary: var(--areum-text-tertiary);
  --color-text-inverse: #ffffff;

  --color-accent-primary: var(--areum-accent);          /* Use areum accent */
  --color-accent-primary-hover: var(--areum-accent-hover);
  --color-accent-primary-light: #eef2ff;

  --color-success: var(--areum-success);
  --color-success-light: var(--areum-success-bg);
  --color-warning: var(--areum-warning);
  --color-warning-light: var(--areum-warning-bg);
  --color-danger: var(--areum-danger);
  --color-danger-light: var(--areum-danger-bg);
  --color-info: #3b82f6;
  --color-info-light: #dbeafe;

  --color-border-primary: var(--areum-border);          /* Use areum border */
  --color-border-secondary: #d1d5db;
  --color-border-accent: var(--color-accent-primary);

  /* Typography */
  --font-family-primary:
    "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  --font-family-mono: "JetBrains Mono", "SF Mono", Consolas, monospace;

  /* Areum Typography Scale (exactly 5 sizes) */
  --areum-text-xs: 11px;    /* Meta, captions */
  --areum-text-sm: 13px;    /* Labels, secondary */
  --areum-text-base: 14px;  /* Body text (default) */
  --areum-text-md: 16px;    /* Subheadings, emphasis */
  --areum-text-lg: 18px;    /* Page headings */

  /* Legacy font sizes (map to areum where appropriate) */
  --font-size-xs: 0.75rem; /* 12px - close to areum-xs */
  --font-size-sm: 0.875rem; /* 14px - same as areum-base */
  --font-size-base: 1rem; /* 16px - same as areum-md */
  --font-size-lg: 1.125rem; /* 18px - same as areum-lg */
  --font-size-xl: 1.25rem; /* 20px */
  --font-size-2xl: 1.5rem; /* 24px */
  --font-size-3xl: 1.875rem; /* 30px */

  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;

  --line-height-tight: 1.25;
  --line-height-normal: 1.5;
  --line-height-relaxed: 1.75;

  /* Spacing Scale (8px base) */
  --space-1: 0.25rem; /* 4px */
  --space-2: 0.5rem; /* 8px */
  --space-3: 0.75rem; /* 12px */
  --space-4: 1rem; /* 16px */
  --space-5: 1.25rem; /* 20px */
  --space-6: 1.5rem; /* 24px */
  --space-8: 2rem; /* 32px */
  --space-10: 2.5rem; /* 40px */
  --space-12: 3rem; /* 48px */
  --space-16: 4rem; /* 64px */

  /* Border Radius */
  --radius-sm: 0.25rem; /* 4px */
  --radius-base: 0.5rem; /* 8px */
  --radius-lg: 0.75rem; /* 12px */
  --radius-xl: 1rem; /* 16px */
  --radius-full: 9999px;

  /* Areum Border Radius (Notion-style) */
  --areum-radius-sm: 3px;   /* Tabs, badges */
  --areum-radius-md: 6px;   /* Cards, buttons */
  --areum-radius-lg: 8px;   /* Large containers */

  /* Shadows */
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-base:
    0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
  --shadow-lg:
    0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  --shadow-xl:
    0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);

  /* Areum Shadows (visible depth) */
  --areum-shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.12), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
  --areum-shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.12), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  --areum-shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.12), 0 4px 6px -2px rgba(0, 0, 0, 0.05);

  /* Areum Layout Constants */
  --areum-sidebar-width: 288px;     /* w-72 */
  --areum-list-item-height: 28px;   /* Single-line density */
  --areum-touch-target: 36px;       /* Minimum interactive size */
  --areum-section-gap: 24px;        /* Between major sections */
  --areum-section-padding: 24px;    /* Standard section padding */
  --areum-section-padding-compact: 16px;  /* Compact section padding */

  /* Z-Index Scale */
  --z-dropdown: 1000;
  --z-sticky: 1020;
  --z-fixed: 1030;
  --z-modal-backdrop: 1040;
  --z-modal: 1050;
  --z-popover: 1060;
  --z-tooltip: 1070;

  /* Chart Colors */
  --chart-color-primary: #4338ca;
  --chart-color-success: #16a34a;
  --chart-color-warning: #d97706;
  --chart-color-danger: #dc2626;
  --chart-color-info: #3b82f6;
  --chart-color-purple: #8b5cf6;
  --chart-grid: rgba(107, 114, 128, 0.2);
  --chart-axis: rgba(107, 114, 128, 0.4);
}

/* === RESET & BASE STYLES === */
*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  /* INSTANT FEEDBACK: No transitions by default */
  transition: none;
}

/* SELECTIVE INSTANT FEEDBACK: Only for interactive elements */
.btn,
.card-interactive,
.tab,
.input:focus,
.modal,
.strategy-card,
.event-detail-item,
.recommendation-item,
.nav-item,
.deep-dive-tab {
  transition: all 0.05s ease;
}

html {
  font-size: 16px;
  line-height: 1.5;
  -webkit-text-size-adjust: 100%;
  scroll-behavior: smooth;
}

body {
  font-family: var(--font-family-primary);
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-normal);
  line-height: var(--line-height-normal);
  color: var(--color-text-primary);
  background-color: var(--color-bg-primary);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* === TYPOGRAPHY SYSTEM === */
.text-xs {
  font-size: var(--font-size-xs);
}
.text-sm {
  font-size: var(--font-size-sm);
}
.text-base {
  font-size: var(--font-size-base);
}
.text-lg {
  font-size: var(--font-size-lg);
}
.text-xl {
  font-size: var(--font-size-xl);
}
.text-2xl {
  font-size: var(--font-size-2xl);
}
.text-3xl {
  font-size: var(--font-size-3xl);
}

.font-normal {
  font-weight: var(--font-weight-normal);
}
.font-medium {
  font-weight: var(--font-weight-medium);
}
.font-semibold {
  font-weight: var(--font-weight-semibold);
}
.font-bold {
  font-weight: var(--font-weight-bold);
}

.font-mono {
  font-family: var(--font-family-mono);
}

.leading-tight {
  line-height: var(--line-height-tight);
}
.leading-normal {
  line-height: var(--line-height-normal);
}
.leading-relaxed {
  line-height: var(--line-height-relaxed);
}

.text-primary {
  color: var(--color-text-primary);
}
.text-secondary {
  color: var(--color-text-secondary);
}
.text-tertiary {
  color: var(--color-text-tertiary);
}
.text-inverse {
  color: var(--color-text-inverse);
}

.text-success {
  color: var(--color-success);
}
.text-warning {
  color: var(--color-warning);
}
.text-danger {
  color: var(--color-danger);
}
.text-info {
  color: var(--color-info);
}
.text-accent {
  color: var(--color-accent-primary);
}

/* === ENHANCED BUTTON SYSTEM === */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
  padding: var(--space-3) var(--space-4);
  font-family: var(--font-family-primary);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-tight);
  border-radius: var(--radius-base);
  border: 1px solid transparent;
  cursor: pointer;
  text-decoration: none;
  white-space: nowrap;
  user-select: none;
  outline: 0;
  position: relative;
  overflow: hidden;
}

/* INSTANT FEEDBACK: 1px transform on click */
.btn:active {
  transform: translateY(1px);
}

.btn:focus-visible {
  outline: 2px solid var(--color-accent-primary);
  outline-offset: 2px;
}

.btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  pointer-events: none;
}

/* Button Variants */
.btn-primary {
  background-color: var(--color-accent-primary);
  color: var(--color-text-inverse);
  border-color: var(--color-accent-primary);
  box-shadow: var(--shadow-sm);
}

.btn-primary:hover:not(:disabled) {
  background-color: var(--color-accent-primary-hover);
  border-color: var(--color-accent-primary-hover);
  box-shadow: var(--shadow-base);
}

.btn-secondary {
  background-color: var(--color-bg-surface);
  color: var(--color-text-primary);
  border-color: var(--color-border-primary);
  box-shadow: var(--shadow-sm);
}

.btn-secondary:hover:not(:disabled) {
  background-color: var(--color-bg-elevated);
  border-color: var(--color-border-secondary);
  box-shadow: var(--shadow-base);
}

.btn-ghost {
  background-color: transparent;
  color: var(--color-text-secondary);
  border-color: transparent;
}

.btn-ghost:hover:not(:disabled) {
  background-color: var(--color-bg-elevated);
  color: var(--color-text-primary);
}

.btn-success {
  background-color: var(--color-success);
  color: var(--color-text-inverse);
  border-color: var(--color-success);
}

.btn-warning {
  background-color: var(--color-warning);
  color: var(--color-text-inverse);
  border-color: var(--color-warning);
}

.btn-danger {
  background-color: var(--color-danger);
  color: var(--color-text-inverse);
  border-color: var(--color-danger);
}

/* Button Sizes */
.btn-xs {
  padding: var(--space-1) var(--space-2);
  font-size: var(--font-size-xs);
}

.btn-sm {
  padding: var(--space-2) var(--space-3);
  font-size: var(--font-size-sm);
}

.btn-lg {
  padding: var(--space-4) var(--space-6);
  font-size: var(--font-size-lg);
}

.btn-icon {
  padding: var(--space-3);
  min-width: 40px;
  min-height: 40px;
}

.btn-full {
  width: 100%;
}

/* === ENHANCED INPUT SYSTEM === */
.input-group {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.input-label {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-secondary);
}

.input,
.select,
.textarea {
  width: 100%;
  padding: var(--space-3) var(--space-4);
  font-family: var(--font-family-primary);
  font-size: var(--font-size-base);
  color: var(--color-text-primary);
  background-color: var(--color-bg-surface);
  border: 1px solid var(--color-border-primary);
  border-radius: var(--radius-base);
  outline: 0;
}

.input:hover,
.select:hover,
.textarea:hover {
  border-color: var(--color-border-secondary);
}

/* INSTANT FOCUS RING */
.input:focus,
.select:focus,
.textarea:focus {
  border-color: var(--color-accent-primary);
  box-shadow: 0 0 0 3px var(--color-accent-primary-light);
  transform: translateY(-1px);
}

.input:disabled,
.select:disabled,
.textarea:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.input-error {
  border-color: var(--color-danger);
}

.input-error:focus {
  border-color: var(--color-danger);
  box-shadow: 0 0 0 3px var(--color-danger-light);
}

.input-mono {
  font-family: var(--font-family-mono);
}

.select {
  appearance: none;
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
  background-position: right var(--space-2) center;
  background-repeat: no-repeat;
  background-size: 1.5em 1.5em;
  padding-right: var(--space-8);
}

.textarea {
  resize: vertical;
  min-height: 6rem;
}

/* === ENHANCED CARD SYSTEM === */
.card {
  background-color: var(--color-bg-surface);
  border: 1px solid var(--color-border-primary);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-sm);
}

.card-body {
  padding: var(--space-6);
}

.card-header {
  padding: var(--space-6) var(--space-6) 0;
  border-bottom: 1px solid var(--color-border-primary);
  margin-bottom: var(--space-6);
}

.card-footer {
  padding: 0 var(--space-6) var(--space-6);
  border-top: 1px solid var(--color-border-primary);
  margin-top: var(--space-6);
}

.card-elevated {
  background-color: var(--color-bg-elevated);
  box-shadow: var(--shadow-lg);
}

.card-interactive {
  cursor: pointer;
}

.card-interactive:hover {
  border-color: var(--color-border-accent);
  box-shadow: var(--shadow-base);
  transform: translateY(-1px);
}

.card-interactive:active {
  transform: translateY(0);
}

.card-selected {
  border-color: var(--color-accent-primary);
  box-shadow: 0 0 0 1px var(--color-accent-primary);
}

/* === ENHANCED TAB SYSTEM === */
.tabs {
  border-bottom: 1px solid var(--color-border-primary);
}

.tab-list {
  display: flex;
  gap: 0;
}

.tab {
  padding: var(--space-3) var(--space-4);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-secondary);
  background: none;
  border: none;
  border-bottom: 2px solid transparent;
  cursor: pointer;
  white-space: nowrap;
  border-radius: var(--radius-base) var(--radius-base) 0 0;
}

/* INSTANT TAB SWITCHING */
.tab:hover {
  color: var(--color-text-primary);
  background-color: var(--color-bg-elevated);
}

.tab.active {
  color: var(--color-accent-primary);
  border-bottom-color: var(--color-accent-primary);
  background-color: var(--color-accent-primary-light);
  box-shadow: 0 -2px 8px rgba(67, 56, 202, 0.1);
}

.tab-panel {
  padding: var(--space-6) 0;
}

/* === ENHANCED MODAL SYSTEM === */
.modal-backdrop {
  /* Expose backdrop padding as a CSS var so the modal can
     compute its max-height precisely and avoid clipping. */
  --backdrop-padding: var(--space-4);
  position: fixed;
  inset: 0;
  background-color: var(--color-bg-overlay);
  backdrop-filter: blur(4px);
  z-index: var(--z-modal-backdrop);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--backdrop-padding);
}

/* Bottom modal positioning for onboarding and quickstart */
.quickstart-wizard-backdrop,
.onboarding-choice-backdrop {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  display: flex !important;
  align-items: flex-end !important;
  justify-content: center !important;
  padding: 0 !important; /* No padding - modals come from absolute bottom */
  margin: 0 !important;
  box-sizing: border-box !important;
  overflow-y: auto !important; /* Allow scrolling on backdrop */
}

.modal.quickstart-wizard-enhanced,
.modal.onboarding-choice-modal.modal-lg,
.modal.onboarding-choice-modal.modal--lg {
  margin: 0 !important;
  padding: 0 !important;
  border-radius: 16px 16px 0 0 !important; /* Only top corners rounded */
  width: 100% !important;
  max-width: 64rem !important; /* 1024px max width for desktop */
  max-height: 95vh !important; /* Taller modals */
  position: relative !important;
  transform: none !important;
}

/* Mobile: full width and only top corners rounded */
@media (max-width: 768px) {
  .modal.quickstart-wizard-enhanced,
  .modal.onboarding-choice-modal.modal-lg,
  .modal.onboarding-choice-modal.modal--lg {
    max-width: 100vw !important;
    border-radius: 20px 20px 0 0 !important; /* Only top corners on mobile */
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
  }
}

.modal.quickstart-wizard-enhanced .modal-body,
.modal.onboarding-choice-modal.modal-lg .modal-body,
.modal.onboarding-choice-modal.modal--lg .modal-body {
  padding: 0 !important;
  margin: 0 !important;
  overflow-y: auto !important;
  max-height: 95vh !important;
  scrollbar-width: thin !important;
  scrollbar-color: rgba(0, 0, 0, 0.3) transparent !important;
}

.modal.quickstart-wizard-enhanced .modal-body::-webkit-scrollbar,
.modal.onboarding-choice-modal.modal-lg .modal-body::-webkit-scrollbar,
.modal.onboarding-choice-modal.modal--lg .modal-body::-webkit-scrollbar {
  width: 8px !important;
  background: transparent !important;
}

.modal.quickstart-wizard-enhanced .modal-body::-webkit-scrollbar-track,
.modal.onboarding-choice-modal.modal-lg .modal-body::-webkit-scrollbar-track,
.modal.onboarding-choice-modal.modal--lg .modal-body::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.05) !important;
  border-radius: 4px !important;
}

.modal.quickstart-wizard-enhanced .modal-body::-webkit-scrollbar-thumb,
.modal.onboarding-choice-modal.modal-lg .modal-body::-webkit-scrollbar-thumb,
.modal.onboarding-choice-modal.modal--lg .modal-body::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.3) !important;
  border-radius: 4px !important;
}

.modal.quickstart-wizard-enhanced .modal-body::-webkit-scrollbar-thumb:hover,
.modal.onboarding-choice-modal.modal-lg .modal-body::-webkit-scrollbar-thumb:hover,
.modal.onboarding-choice-modal.modal--lg .modal-body::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.5) !important;
}

/* Custom sleek scrollbar for modal backdrops */
.quickstart-wizard-backdrop,
.onboarding-choice-backdrop {
  scrollbar-width: thin !important;
  scrollbar-color: rgba(0, 0, 0, 0.3) transparent !important;
}

.quickstart-wizard-backdrop::-webkit-scrollbar,
.onboarding-choice-backdrop::-webkit-scrollbar {
  width: 8px !important;
  background: transparent !important;
}

.quickstart-wizard-backdrop::-webkit-scrollbar-track,
.onboarding-choice-backdrop::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.05) !important;
  border-radius: 4px !important;
}

.quickstart-wizard-backdrop::-webkit-scrollbar-thumb,
.onboarding-choice-backdrop::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.3) !important;
  border-radius: 4px !important;
  border: 1px solid rgba(255, 255, 255, 0.2) !important;
}

.quickstart-wizard-backdrop::-webkit-scrollbar-thumb:hover,
.onboarding-choice-backdrop::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.5) !important;
}

/* Reset modal overflow behavior */
.modal.quickstart-wizard-enhanced,
.modal.onboarding-choice-modal.modal-lg,
.modal.onboarding-choice-modal.modal--lg {
  overflow: visible !important;
}

/* Override mobile-scroll class for modals */
  .modal.quickstart-wizard-enhanced.mobile-scroll,
  .modal.onboarding-choice-modal.modal-lg.mobile-scroll,
  .modal.onboarding-choice-modal.modal--lg.mobile-scroll {
  overflow: hidden !important;
  -webkit-overflow-scrolling: auto !important;
}

/* Custom scrollbar for content area only */
.quickstart-wizard-enhanced .flex-1.overflow-y-auto::-webkit-scrollbar {
  width: 6px;
}

.quickstart-wizard-enhanced .flex-1.overflow-y-auto::-webkit-scrollbar-track {
  background: transparent;
}

.quickstart-wizard-enhanced .flex-1.overflow-y-auto::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.2);
  border-radius: 3px;
}

.quickstart-wizard-enhanced .flex-1.overflow-y-auto::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.3);
}

.modal {
  background-color: var(--color-bg-surface);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-xl);
  border: 1px solid var(--color-border-primary);
  /* Fit within viewport minus backdrop padding to avoid top/bottom clipping */
  max-height: calc(100dvh - (2 * var(--backdrop-padding, var(--space-4))));
  overflow: hidden;
  z-index: var(--z-modal);
  width: min(100%, var(--modal-max-width, 32rem));
  max-width: var(--modal-max-width, 32rem);
  transform: scale(1);
  display: flex;
  flex-direction: column;
}

/* Tighter outer gap for edge-to-edge wide modals */
.modal-backdrop.backdrop-tight {
  --backdrop-padding: clamp(8px, 1vw, 16px);
}

.modal:hover {
  box-shadow: 0 24px 48px rgba(0, 0, 0, 0.15);
}

.modal--sm,
.modal-sm {
  --modal-max-width: 28rem;
}

.modal--md,
.modal-md {
  --modal-max-width: 32rem;
}

.modal--lg,
.modal-lg {
  --modal-max-width: 42rem;
}

.modal--xl,
.modal-xl {
  --modal-max-width: 56rem;
}

.modal--2xl {
  --modal-max-width: min(90vw, 96rem);
}

.modal--xlarge {
  --modal-max-width: 72rem;
}

.modal-header {
  padding: var(--space-6) var(--space-6) 0;
  border-bottom: 1px solid var(--color-border-primary);
  flex-shrink: 0;
}

.modal-title {
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
}

.modal-body {
  padding: var(--space-6);
  overflow-y: auto;
  flex: 1;
  min-height: 0;
}

.modal-footer {
  padding: 0 var(--space-6) var(--space-6);
  border-top: 1px solid var(--color-border-primary);
  display: flex;
  gap: var(--space-3);
  justify-content: flex-end;
  flex-shrink: 0;
}

/* === CHART SYSTEM === */
.chart-container {
  background-color: var(--color-bg-elevated);
  border: 1px solid var(--color-border-primary);
  border-radius: var(--radius-lg);
  padding: var(--space-6);
  position: relative;
  box-shadow: var(--shadow-sm);
}

.chart-container:hover {
  border-color: var(--color-accent-primary);
  box-shadow: var(--shadow-base);
  transform: translateY(-1px);
}

.chart-crosshair {
  cursor: crosshair;
}

.chart-clickable {
  cursor: pointer;
}

.chart-hover-line {
  pointer-events: none;
  opacity: 0.9;
}

.chart-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--space-6);
}

.chart-title {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
}

.chart-controls {
  display: flex;
  gap: var(--space-1);
  background-color: var(--color-border-primary);
  padding: var(--space-1);
  border-radius: var(--radius-base);
}

.chart-control {
  padding: var(--space-2) var(--space-3);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-secondary);
  background: none;
  border: none;
  border-radius: var(--radius-sm);
  cursor: pointer;
}

.chart-control.active {
  background-color: var(--color-bg-surface);
  color: var(--color-accent-primary);
  box-shadow: var(--shadow-sm);
}

/* === ENHANCED DASHBOARD COMPONENTS === */
.dashboard-card {
  background-color: var(--color-bg-elevated);
  border-radius: var(--radius-lg);
  padding: var(--space-6);
  border: 1px solid var(--color-border-primary);
  box-shadow: var(--shadow-sm);
}

.dashboard-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
  border-color: var(--color-accent-primary);
}

.dashboard-card h2 {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  margin-bottom: var(--space-3);
  color: var(--color-text-secondary);
}

.key-stats {
  display: flex;
  gap: var(--space-6);
  margin-top: var(--space-4);
}

.key-stats .stat .value {
  font-size: var(--font-size-2xl);
  font-weight: var(--font-weight-bold);
  font-family: var(--font-family-mono);
}

.key-stats .stat .value.success {
  color: var(--color-success);
}

.key-stats .stat .value.warning {
  color: var(--color-warning);
}

.key-stats .stat .value.median {
  color: var(--color-accent-primary);
}

.key-stats .stat .label {
  color: var(--color-text-secondary);
  font-size: var(--font-size-sm);
  margin-top: var(--space-1);
}

/* === ENHANCED EVENT ITEMS === */
.event-detail-item {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-3);
  margin: 0 calc(-1 * var(--space-3));
  border-bottom: 1px solid var(--color-border-primary);
  border-radius: var(--radius-base);
  cursor: pointer;
}

.event-detail-item:hover {
  background-color: var(--color-bg-surface);
  transform: translateX(4px);
  box-shadow: var(--shadow-sm);
}

.event-detail-item.selected {
  background-color: var(--color-accent-primary-light);
  border-color: var(--color-accent-primary);
  transform: translateX(8px);
  box-shadow: var(--shadow-base);
}

.event-year {
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-tertiary);
  font-size: var(--font-size-sm);
}

.event-icon,
.detail-icon {
  font-size: var(--font-size-lg);
}

.event-content .title,
.detail-content .title {
  font-weight: var(--font-weight-semibold);
  margin-bottom: var(--space-1);
}

.event-content .details,
.detail-content .details {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
}

.event-content .details .income,
.detail-content .details .income {
  color: var(--color-success);
}

.event-content .details .expense,
.detail-content .details .expense {
  color: var(--color-danger);
}

/* === ENHANCED STRATEGY CARDS === */
.strategy-card {
  background: var(--color-bg-surface);
  border: 1px solid var(--color-border-primary);
  border-radius: var(--radius-base);
  padding: var(--space-4);
  cursor: pointer;
  overflow: hidden;
  box-shadow: var(--shadow-sm);
}

.strategy-card:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-base);
  border-color: var(--color-accent-primary);
}

.strategy-card.selected {
  border-color: var(--color-accent-primary);
  box-shadow:
    0 0 0 2px rgba(67, 56, 202, 0.2),
    var(--shadow-base);
  transform: translateY(-1px);
}

.strategy-card .strategy-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-2);
}

.strategy-card .strategy-content {
  display: none;
}

.strategy-card.selected .strategy-content {
  display: block;
}

.strategy-card .expand-indicator {
  color: var(--color-accent-primary);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-semibold);
}

.strategy-card.selected .expand-indicator {
  transform: rotate(90deg);
}

/* === FOCUS YEAR VIEW === */
.focus-year-view {
  background-color: var(--color-bg-elevated);
  border-radius: var(--radius-lg);
  padding: var(--space-5);
  border: 1px solid var(--color-border-primary);
}

.focus-year-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-4);
}

.focus-year-header h3 {
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
}

/* === STATUS INDICATORS === */
.status-badge {
  display: inline-flex;
  align-items: center;
  gap: var(--space-1);
  padding: var(--space-1) var(--space-2);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-semibold);
  border-radius: var(--radius-full);
  text-transform: uppercase;
  letter-spacing: 0.025em;
}

.status-success {
  color: var(--color-success);
  background-color: var(--color-success-light);
}

.status-warning {
  color: var(--color-warning);
  background-color: var(--color-warning-light);
}

.status-danger {
  color: var(--color-danger);
  background-color: var(--color-danger-light);
}

.status-info {
  color: var(--color-info);
  background-color: var(--color-info-light);
}

/* === LAYOUT SYSTEM === */
.container {
  width: 100%;
  max-width: 1600px;
  margin: 0 auto;
  padding: 0 var(--space-4);
}

.grid {
  display: grid;
  gap: var(--space-6);
}

.grid-cols-1 {
  grid-template-columns: repeat(1, minmax(0, 1fr));
}
.grid-cols-2 {
  grid-template-columns: repeat(2, minmax(0, 1fr));
}
.grid-cols-3 {
  grid-template-columns: repeat(3, minmax(0, 1fr));
}
.grid-cols-4 {
  grid-template-columns: repeat(4, minmax(0, 1fr));
}

.flex {
  display: flex;
}

.flex-col {
  flex-direction: column;
}

.items-start {
  align-items: flex-start;
}
.items-center {
  align-items: center;
}
.items-end {
  align-items: flex-end;
}

.justify-start {
  justify-content: flex-start;
}
.justify-center {
  justify-content: center;
}
.justify-end {
  justify-content: flex-end;
}
.justify-between {
  justify-content: space-between;
}

.gap-1 {
  gap: var(--space-1);
}
.gap-2 {
  gap: var(--space-2);
}
.gap-3 {
  gap: var(--space-3);
}
.gap-4 {
  gap: var(--space-4);
}
.gap-6 {
  gap: var(--space-6);
}
.gap-8 {
  gap: var(--space-8);
}

/* === SPACING UTILITIES === */
.p-1 {
  padding: var(--space-1);
}
.p-2 {
  padding: var(--space-2);
}
.p-3 {
  padding: var(--space-3);
}
.p-4 {
  padding: var(--space-4);
}
.p-6 {
  padding: var(--space-6);
}

.px-1 {
  padding-left: var(--space-1);
  padding-right: var(--space-1);
}
.px-2 {
  padding-left: var(--space-2);
  padding-right: var(--space-2);
}
.px-3 {
  padding-left: var(--space-3);
  padding-right: var(--space-3);
}
.px-4 {
  padding-left: var(--space-4);
  padding-right: var(--space-4);
}
.px-6 {
  padding-left: var(--space-6);
  padding-right: var(--space-6);
}

.py-1 {
  padding-top: var(--space-1);
  padding-bottom: var(--space-1);
}
.py-2 {
  padding-top: var(--space-2);
  padding-bottom: var(--space-2);
}
.py-3 {
  padding-top: var(--space-3);
  padding-bottom: var(--space-3);
}
.py-4 {
  padding-top: var(--space-4);
  padding-bottom: var(--space-4);
}
.py-6 {
  padding-top: var(--space-6);
  padding-bottom: var(--space-6);
}

.m-1 {
  margin: var(--space-1);
}
.m-2 {
  margin: var(--space-2);
}
.m-3 {
  margin: var(--space-3);
}
.m-4 {
  margin: var(--space-4);
}
.m-6 {
  margin: var(--space-6);
}

.mb-1 {
  margin-bottom: var(--space-1);
}
.mb-2 {
  margin-bottom: var(--space-2);
}
.mb-3 {
  margin-bottom: var(--space-3);
}
.mb-4 {
  margin-bottom: var(--space-4);
}
.mb-6 {
  margin-bottom: var(--space-6);
}

.mt-1 {
  margin-top: var(--space-1);
}
.mt-2 {
  margin-top: var(--space-2);
}
.mt-3 {
  margin-top: var(--space-3);
}
.mt-4 {
  margin-top: var(--space-4);
}
.mt-6 {
  margin-top: var(--space-6);
}

/* === MOBILE ENHANCEMENTS === */
/* Touch-friendly interactions */
.touch-target {
  min-height: 44px;
  min-width: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.touch-feedback:active {
  transform: scale(0.95);
  opacity: 0.8;
}

/* Mobile navigation */
.mobile-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: var(--color-bg-surface);
  border-top: 1px solid var(--color-border-primary);
  z-index: var(--z-fixed);
  padding-bottom: env(safe-area-inset-bottom);
}

.mobile-nav-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: var(--space-2) var(--space-4);
  min-height: 60px;
  color: var(--color-text-secondary);
  text-decoration: none;
}

.mobile-nav-item.active {
  color: var(--color-accent-primary);
  background-color: var(--color-accent-primary-light);
}

.mobile-nav-item:active {
  color: var(--color-accent-primary-hover);
  transform: scale(0.95);
}

/* === UTILITY CLASSES === */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.hidden {
  display: none;
}
.block {
  display: block;
}
.inline {
  display: inline;
}
.inline-block {
  display: inline-block;
}

.w-full {
  width: 100%;
}
.h-full {
  height: 100%;
}

.cursor-pointer {
  cursor: pointer;
}
.cursor-not-allowed {
  cursor: not-allowed;
}

.border {
  border: 1px solid var(--color-border-primary);
}
.border-accent {
  border-color: var(--color-accent-primary);
}

.rounded-sm {
  border-radius: var(--radius-sm);
}
.rounded {
  border-radius: var(--radius-base);
}
.rounded-lg {
  border-radius: var(--radius-lg);
}
.rounded-xl {
  border-radius: var(--radius-xl);
}
.rounded-full {
  border-radius: var(--radius-full);
}

.shadow-sm {
  box-shadow: var(--shadow-sm);
}
.shadow {
  box-shadow: var(--shadow-base);
}
.shadow-lg {
  box-shadow: var(--shadow-lg);
}
.shadow-xl {
  box-shadow: var(--shadow-xl);
}

/* === FOCUS MANAGEMENT === */
.focus-ring:focus-visible {
  outline: 2px solid var(--color-accent-primary);
  outline-offset: 2px;
}

/* === RESPONSIVE DESIGN === */
@media (max-width: 768px) {
  .container {
    padding: 0 var(--space-3);
  }

  .grid-cols-2 {
    grid-template-columns: 1fr;
  }

  .grid-cols-3 {
    grid-template-columns: 1fr;
  }

  .grid-cols-4 {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .modal {
    margin: var(--space-2);
    max-width: calc(100vw - var(--space-4));
    border-radius: 20px 20px 0 0;
    position: fixed;
    bottom: 0;
    top: auto;
  }

  .modal-backdrop {
    align-items: flex-end;
  }

  .btn-full-mobile {
    width: 100%;
  }
  
  /* Enhanced mobile input styling */
  .input,
  .select,
  .textarea {
    font-size: 16px; /* Prevents zoom on iOS */
    min-height: 48px; /* Touch-friendly height */
  }
  
  /* Mobile button improvements */
  .btn {
    min-height: 48px;
    font-size: 16px;
    padding: var(--space-3) var(--space-4);
  }
  
  .btn-sm {
    min-height: 40px;
    font-size: 14px;
  }
  
  /* Mobile card improvements */
  .card {
    margin: 0 var(--space-2) var(--space-4) var(--space-2);
  }
  
  .card-body {
    padding: var(--space-4);
  }
}

@media (max-width: 640px) {
  .grid-cols-4 {
    grid-template-columns: 1fr;
  }

  .flex-col-mobile {
    flex-direction: column;
  }
  
  /* Stack buttons vertically on small screens */
  .btn-group-mobile {
    flex-direction: column;
    gap: var(--space-2);
  }
  
  .btn-group-mobile .btn {
    width: 100%;
  }
  
  /* Larger text for small screens */
  .text-xs {
    font-size: 14px;
  }
  
  .text-sm {
    font-size: 16px;
  }
}

/* === LEGACY STYLES (CONSOLIDATED FROM INDEX.CSS) === */
/* Statement Components */
.statement details {
  margin-bottom: 8px;
}
.statement summary {
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  list-style: none;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 0;
}
.statement summary::-webkit-details-marker {
  display: none;
}

.statement summary .title-group {
  display: flex;
  align-items: center;
}
.statement summary .title-group::before {
  content: "►";
  font-size: 10px;
  margin-right: 12px;
  transition: transform 0.2s;
}
.statement details[open] > summary .title-group::before {
  transform: rotate(90deg);
}

.statement .summary-value {
  font-weight: 600;
}
.statement-content {
  padding-left: 22px;
}

.statement-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 0;
  font-size: 14px;
  border-bottom: 1px solid var(--color-border-primary);
}
.statement-row:last-child {
  border-bottom: none;
}
.statement-row .key {
  color: var(--color-text-secondary);
}
.statement-row .value {
  font-weight: 500;
  text-align: right;
}

.statement-grand-total {
  font-weight: 600;
  padding: 12px;
  border-radius: 8px;
  background-color: var(--color-accent-primary-light);
  color: var(--color-accent-primary);
  margin-top: 8px;
}

.statement-row-bs {
  display: grid;
  grid-template-columns: 1fr auto auto;
  gap: 16px;
  align-items: center;
  padding: 8px 0;
  font-size: 14px;
  border-bottom: 1px solid var(--color-border-primary);
}
.statement-row-bs:last-child {
  border-bottom: none;
}

/* Year-over-Year Change Pills */
.yoy-change-details {
  display: flex;
  gap: 6px;
  justify-self: end;
}
.yoy-change-pill {
  font-size: 11px;
  padding: 2px 8px;
  border-radius: 10px;
  font-weight: 600;
  white-space: nowrap;
}
.yoy-change-pill.contribution {
  background-color: var(--color-accent-primary-light);
  color: var(--color-accent-primary);
}
.yoy-change-pill.growth {
  background-color: var(--color-success-light);
  color: var(--color-success);
}
.yoy-change-pill.loss {
  background-color: var(--color-danger-light);
  color: var(--color-danger);
}
.yoy-change-pill.paydown {
  background-color: var(--color-success-light);
  color: var(--color-success);
}

/* Main App Layout */
.app-container {
  width: 100%;
  background-color: var(--color-bg-surface);
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.app-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 24px;
  border-bottom: 1px solid var(--color-border-primary);
  background-color: var(--color-bg-surface);
}
.app-header .logo {
  font-weight: 700;
  font-size: 18px;
}
.app-header .logo-pro {
  color: var(--color-accent-primary);
}
.app-header .controls {
  display: flex;
  align-items: center;
  gap: 8px;
}

.main-content {
  display: grid;
  grid-template-columns: 450px 1fr;
  min-height: 900px;
}

.left-panel {
  padding: 24px;
  border-right: 1px solid var(--color-border-primary);
  background-color: var(--color-bg-primary);
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.right-panel {
  padding: 32px;
  overflow-y: auto;
  background-color: var(--color-bg-surface);
}

/* Panel Components */
.panel-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.panel-header h2 {
  font-size: 18px;
  font-weight: 600;
}

.panel-section {
  margin-bottom: 24px;
}

.story-section {
  padding-bottom: 16px;
  border-bottom: 1px solid var(--color-border-primary);
}
.story-section:last-child {
  border-bottom: none;
}

.story-section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}
.story-section-header h3 {
  font-size: 15px;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 8px;
}

.summary-line {
  color: var(--color-text-secondary);
  margin-bottom: 4px;
}
.summary-line.highlight {
  color: var(--color-text-primary);
  font-weight: 500;
}

.detail-view-card {
  background: var(--color-bg-surface);
  border: 1px solid var(--color-border-primary);
  border-radius: 8px;
  margin-top: 16px;
  padding: 16px;
}

/* Enhanced Dashboard Grid */
.dashboard-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 24px;
}

/* Detail Items */
.detail-item {
  display: grid;
  grid-template-columns: 30px 1fr;
  gap: 12px;
  align-items: start;
  padding: 12px 0;
  border-bottom: 1px solid var(--color-border-primary);
}
.detail-item:last-child {
  border-bottom: none;
  padding-bottom: 0;
}
.detail-item:first-child {
  padding-top: 0;
}

/* Loading Animation */
@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}
.animate-spin {
  animation: spin 1s linear infinite;
}

.button-loading {
  opacity: 0.8;
  cursor: wait;
}

/* Action Links */
.action-link {
  color: var(--color-accent-primary);
  text-decoration: none;
  font-weight: 500;
  font-size: 13px;
  cursor: pointer;
  display: inline-block;
}
.action-link:hover {
  text-decoration: underline;
}

/* Chart Toggle Group */
.chart-toggle-group {
  display: flex;
  background-color: var(--color-border-primary);
  padding: 2px;
  border-radius: 8px;
}

.chart-toggle-group button {
  background-color: transparent;
  border: none;
  color: var(--color-text-secondary);
  padding: 8px 16px;
  font-size: 13px;
  font-weight: 500;
  border-radius: 6px;
  cursor: pointer;
}

.chart-toggle-group button.active {
  background-color: var(--color-bg-surface);
  color: var(--color-accent-primary);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

/* Goal Items */
.goal-item {
  padding: 16px;
  background: var(--color-bg-surface);
  border: 1px solid var(--color-border-primary);
  border-radius: 8px;
  margin-bottom: 12px;
}

.goal-item.primary-goal {
  border-left: 3px solid var(--color-accent-primary);
  padding-left: 20px;
  margin-left: -4px;
}

.goal-item .title {
  font-weight: 600;
  margin-bottom: 8px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.goal-item .title .primary-tag {
  font-size: 10px;
  font-weight: 600;
  color: var(--color-accent-primary);
  background-color: var(--color-accent-primary-light);
  padding: 2px 6px;
  border-radius: 4px;
}

.goal-item .details {
  font-size: 13px;
  color: var(--color-text-secondary);
  line-height: 1.5;
}

/* Mobile App Enhancements */
.mobile-app {
  display: flex;
  flex-direction: column;
  height: 100vh;
  width: 100vw;
  background: var(--color-bg-primary);
  overflow: hidden;
}

.mobile-content {
  flex-grow: 1;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
}

.mobile-header {
  padding: 12px 16px;
  background-color: var(--color-bg-surface);
  border-bottom: 1px solid var(--color-border-primary);
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-shrink: 0;
  min-height: 50px;
}

.mobile-header .title {
  font-size: 1rem;
  font-weight: 600;
}

.mobile-header .action-button {
  background: none;
  border: none;
  font-size: 1.5rem;
  color: var(--color-text-secondary);
  cursor: pointer;
}

.mobile-header .back-button {
  font-size: 1.25rem;
  color: var(--color-accent-primary);
  text-decoration: none;
  font-weight: 600;
}

.mobile-header .close-button {
  font-size: 1.5rem;
  color: var(--color-text-secondary);
}

.mobile-header .button-save {
  font-size: 1rem;
  font-weight: 600;
  color: var(--color-accent-primary);
  background: none;
  border: none;
  cursor: pointer;
}

.app-content {
  flex-grow: 1;
  overflow-y: auto;
  padding: 16px 0;
}

.content-section {
  padding: 8px 16px;
  margin-bottom: 8px;
  border-bottom: 1px solid var(--color-border-primary);
}

.content-section:last-child {
  border-bottom: none;
  margin-bottom: 0;
}

.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.section-header .title {
  font-size: 0.8rem;
  font-weight: 600;
  color: var(--color-text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.section-header .action {
  font-size: 0.875rem;
  font-weight: 500;
  color: var(--color-accent-primary);
  cursor: pointer;
}

/* Welcome Screen */
.welcome-screen {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  height: 100vh;
  padding: 24px 16px;
  position: relative;
}

.welcome-screen .header {
  text-align: center;
}

.welcome-screen .header h1 {
  font-size: 1.5rem;
  margin-bottom: 8px;
}

.welcome-screen .header p {
  color: var(--color-text-secondary);
}

.persona-card {
  background: var(--color-bg-surface);
  border: 1px solid var(--color-border-primary);
  border-radius: 12px;
  padding: 24px;
  text-align: left;
  margin: 24px 0;
}

.persona-card .title {
  font-size: 1.25rem;
  font-weight: 600;
  margin-bottom: 8px;
}

.persona-card p {
  font-size: 0.875rem;
  color: var(--color-text-secondary);
  margin-bottom: 16px;
}

.persona-card .key-challenge {
  font-weight: 500;
  color: var(--color-text-primary);
}

.persona-card .details-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
  font-size: 0.875rem;
  margin-bottom: 16px;
}

.persona-card .details-grid .label {
  color: var(--color-text-secondary);
}

.persona-card .details-grid .value {
  font-weight: 500;
}

.persona-card .checklist .label {
  font-size: 0.8rem;
  font-weight: 600;
  color: var(--color-text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 8px;
}

.persona-card .checklist li {
  list-style: none;
  font-size: 0.875rem;
  margin-bottom: 4px;
  padding-left: 20px;
  position: relative;
}

.persona-card .checklist li::before {
  content: "•";
  color: var(--color-accent-primary);
  position: absolute;
  left: 0;
}

.welcome-footer {
  text-align: center;
}

.welcome-footer .swipe-text {
  font-size: 0.75rem;
  color: var(--color-text-tertiary);
  margin-bottom: 8px;
}

.welcome-footer .dots {
  font-size: 1.25rem;
  color: var(--color-border-primary);
  margin-bottom: 16px;
  letter-spacing: 4px;
}

.welcome-footer .dots .active {
  color: var(--color-accent-primary);
}

.welcome-footer .link-scratch {
  color: var(--color-text-secondary);
  font-weight: 500;
  text-decoration: none;
  margin-top: 16px;
  display: inline-block;
  background: none;
  border: none;
  cursor: pointer;
}

/* Build Tab Styles */
.goal-summary .title {
  font-size: 1rem;
  font-weight: 600;
}

.goal-summary p {
  font-size: 0.875rem;
  color: var(--color-text-secondary);
}

.goal-summary .success {
  color: var(--color-success);
  font-weight: 500;
}

.goal-summary .secondary-goals {
  margin-top: 8px;
}

.goal-summary .secondary-goals li {
  list-style: none;
  padding-left: 20px;
  position: relative;
  font-size: 0.875rem;
  color: var(--color-text-secondary);
  line-height: 1.6;
}

.goal-summary .secondary-goals li::before {
  content: "○";
  color: var(--color-text-tertiary);
  position: absolute;
  left: 0;
}

.event-detail-card {
  background: var(--color-bg-surface);
  border: 1px solid var(--color-border-primary);
  border-radius: 12px;
  padding: 16px;
  margin-top: 12px;
}

.event-detail-card h3 {
  font-size: 1rem;
  font-weight: 600;
  margin-bottom: 8px;
}

.event-detail-card p {
  font-size: 0.875rem;
  color: var(--color-text-secondary);
  line-height: 1.6;
}

/* Analyze Tab */
.dashboard-summary {
  text-align: center;
  border-bottom: 1px solid var(--color-border-primary);
  padding-bottom: 16px;
  margin: 0 16px 16px 16px;
}

.dashboard-summary p {
  font-size: 0.875rem;
  color: var(--color-text-secondary);
}

.dashboard-summary .value {
  font-family: var(--font-family-mono);
  font-size: 1.125rem;
  font-weight: 700;
  color: var(--color-text-primary);
}

.chart-placeholder {
  width: 100%;
  height: 300px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-bg-surface);
  border: 1px dashed var(--color-border-primary);
  border-radius: 8px;
  color: var(--color-text-secondary);
  font-size: 14px;
}

.deep-dive-tabs {
  display: flex;
  gap: 4px;
  overflow-x: auto;
  padding: 4px 16px 12px 16px;
  scrollbar-width: none;
}

.deep-dive-tabs::-webkit-scrollbar {
  display: none;
}

.deep-dive-tab {
  flex-shrink: 0;
  padding: 6px 12px;
  border: 1px solid var(--color-border-primary);
  border-radius: 8px;
  cursor: pointer;
  font-size: 0.875rem;
  font-weight: 500;
  transition: all 0.05s ease;
  box-shadow: var(--shadow-sm);
}

.deep-dive-tab:hover {
  border-color: var(--color-accent-primary);
  box-shadow: 0 2px 4px rgba(67, 56, 202, 0.2);
  transform: translateY(-1px);
}

.deep-dive-tab.active {
  background: var(--color-accent-primary);
  color: white;
  border-color: var(--color-accent-primary);
  box-shadow: 0 4px 8px rgba(67, 56, 202, 0.3);
  transform: translateY(-1px);
}

.deep-dive-content {
  padding: 0 16px;
}

/* Mobile Button Overrides */
@media (max-width: 768px) {
  .button {
    display: block;
    width: 100%;
    padding: 12px 16px;
    border-radius: 8px;
    background-color: var(--color-accent-primary);
    color: white;
    font-weight: 600;
    text-align: center;
    border: none;
    cursor: pointer;
    font-size: 1rem;
    text-decoration: none;
  }

  .button-secondary {
    background-color: transparent;
    color: var(--color-text-primary);
    border: 1px solid var(--color-border-primary);
  }

  .app-container {
    display: none;
  }
}

/* === ACCESSIBILITY === */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    transition: none !important;
    animation: none !important;
  }
}

@media (prefers-contrast: high) {
  :root {
    --color-border-primary: #9ca3af;
    --color-border-secondary: #6b7280;
  }

  .card,
  .input,
  .chart-container {
    border-width: 2px;
  }

  .tab.active {
    border-bottom-width: 3px;
  }
}
